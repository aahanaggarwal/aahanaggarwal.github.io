<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog - Aahan Aggarwal</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
</head>

<body class="crt">
    <nav id="top-nav">
        <div class="nav-logo">AAHAN.DEV</div>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../pics/index.html">Pics</a></li>
            <li><a href="index.html">Blog</a></li>
        </ul>
    </nav>
    <div id="hud-coords">X: 0000 Y: 0000</div>
    <div id="hud-timer">SESSION: 00:00:00</div>

    <canvas id="circuit"></canvas>
    <div id="cursor"></div>

    <header>
        <h1><span class="glitch decrypt-effect">Transmission Log</span></h1>
    </header>

    <main>
        <section>
            <h2>// Recent Entries</h2>
            <ul class="blog-list" id="blog-list">
                <li>Loading transmission log...</li>
            </ul>
        </section>
    </main>

    <script src="../main.js"></script>
    <script>
        async function loadBlogList() {
            const list = document.getElementById("blog-list");
            try {
                const res = await fetch("posts.json");
                if (!res.ok) throw new Error("Failed to load posts");
                const posts = await res.json();

                list.innerHTML = ""; // Clear loading message

                posts.forEach(post => {
                    const li = document.createElement("li");
                    li.innerHTML = `
              <span class="date">[${post.date}]</span>
              <a href="view.html?post=${post.file}">${post.title}</a>
            `;
                    list.appendChild(li);
                });
            } catch (err) {
                list.innerHTML = "<li>Error loading transmission log. Connection failed.</li>";
                console.error(err);
            }
        }
        loadBlogList();
    </script>
</body>

</html>